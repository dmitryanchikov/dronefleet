# Программа для управления дроном

Проект для взаимодействия с полетным контроллером Betaflight через USB-подключение. Использует MSP (MultiWii Serial Protocol) для коммуникации.

## Требования

- Python 3.8 или выше
- Установленный `uv` (пакетный менеджер Python)
- Дрон с прошивкой Betaflight
- USB-подключение к дрону

## Установка

1. Создайте виртуальное окружение и активируйте его:
   ```bash
   uv venv
   source .venv/bin/activate
   ```

2. Установите зависимости:
   ```bash
   uv pip install --editable .
   ```

3. Настройте порт подключения:
   ```bash
   cp env.example .env
   ```
   Отредактируйте `.env` файл, указав правильный путь к USB-порту вашего дрона в переменной `PORT`.

## Структура проекта

```
drone-getting-started/
├── src/
│   └── drone_control/
│       ├── __init__.py
│       ├── msp_telemetry.py  # Чтение телеметрии через MSP протокол
│       ├── pymultiwii_telemetry.py  # Демонстрационный файл для Pluto Drone
│       └── README.md
├── .gitignore
├── env.example
├── .env           # локальная конфигурация (не включается в git)
├── pyproject.toml
└── README.md
```

## Использование

1. Подключите дрон через USB
2. Закройте Betaflight Configurator (если открыт)
3. Убедитесь, что в `.env` файле указан правильный порт
4. Запустите программу:
   ```bash
   python -m drone_control.msp_telemetry
   ```

## Реализации

Проект содержит две реализации:

1. **msp_telemetry.py** - основная реализация для дронов с Betaflight через USB
   - Использует собственную реализацию протокола MSP
   - Работает с любыми полетными контроллерами, поддерживающими MSP

2. **pymultiwii_telemetry.py** - демонстрационная реализация для Pluto Drone
   - Работает через TCP/IP соединение, а не USB
   - Предназначена только для Pluto Drone
   - Не подходит для стандартных дронов с Betaflight через USB

## Возможности

- Чтение телеметрии с дрона в реальном времени через MSP протокол
- Получение данных о положении (крен, тангаж, рыскание)
- Мониторинг напряжения батареи

## Разработка

Проект использует:
- `pyserial` для USB-коммуникации
- MSP протокол для обмена данными
- `uv` для управления зависимостями
- `python-dotenv` для конфигурации

## Лицензия

MIT
